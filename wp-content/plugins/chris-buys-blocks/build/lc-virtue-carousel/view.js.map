{"version":3,"file":"lc-virtue-carousel/view.js","mappings":"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","sources":["webpack://chris-buys-blocks/./src/lc-virtue-carousel/view.js"],"sourcesContent":["// import gsap from \"gsap\";\n// import { ScrollToPlugin } from \"gsap/ScrollToPlugin\";\n\n\nfunction loadCallback() {\n\tgsap.registerPlugin(ScrollToPlugin);\n\n\t// Function to handle the carousel logic for smaller screens\n\tconst initializeCarousel = () => {\n\t\tif (window.innerWidth < 1024) {\n\t\t\tconst track = document.querySelector(\".carousel-track\");\n\t\t\tconst slides = Array.from(track.children);\n\t\t\tconst dotsNav = document.querySelector(\".carousel-dots\");\n\t\t\tconst dots = Array.from(dotsNav.children);\n\t\t\tlet currentSlideIndex = 0;\n\t\t\tlet slideInterval;\n\t\t\tlet isScrolling = false; // Flag to prevent double-triggering\n\t\t\tconst slideGap = 0; // Adjust if there's any gap between slides\n\t\t\tconst slideDuration = 3000; // Duration for auto-slide\n\n\t\t\t// Function to manually calculate slide positions and handle resize\n\t\t\tconst setSlidePositions = () => {\n\t\t\t\tconst slideWidth = slides[0].getBoundingClientRect().width;\n\t\t\t\tconst containerWidth =\n\t\t\t\t\ttrack.parentElement.getBoundingClientRect().width;\n\t\t\t\tconst initialOffset = (containerWidth - slideWidth) / 2;\n\n\t\t\t\t// Set initial offset for the first slide\n\t\t\t\ttrack.style.paddingLeft = `${initialOffset}px`;\n\n\t\t\t\t// Adjust slides position\n\t\t\t\tslides.forEach((slide, index) => {\n\t\t\t\t\tslide.style.left = `${(slideWidth + slideGap) * index}px`;\n\t\t\t\t});\n\n\t\t\t\tupdateDots(-1, currentSlideIndex); // Initialize dots correctly\n\t\t\t};\n\n\t\t\tconst updateDots = (currentIndex, targetIndex) => {\n\t\t\t\tif (dots[targetIndex]) {\n\t\t\t\t\tdots[currentIndex]?.classList.remove(\"active\");\n\t\t\t\t\tdots[targetIndex].classList.add(\"active\");\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst moveToSlide = (targetIndex) => {\n\t\t\t\tconst slideWidth = slides[0].getBoundingClientRect().width;\n\t\t\t\tconst targetSlide = slides[targetIndex];\n\t\t\t\tconst targetPosition =\n\t\t\t\t\ttargetSlide.offsetLeft -\n\t\t\t\t\t(track.parentElement.getBoundingClientRect().width - slideWidth) / 2;\n\n\t\t\t\tisScrolling = true; // Set flag to prevent scroll-triggered updates\n\n\t\t\t\tgsap.to(track, {\n\t\t\t\t\tscrollTo: { x: targetPosition },\n\t\t\t\t\tduration: 0.6,\n\t\t\t\t\tease: \"power2.inOut\",\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\tisScrolling = false; // Reset flag after animation completes\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tupdateDots(currentSlideIndex, targetIndex);\n\t\t\t\tcurrentSlideIndex = targetIndex;\n\t\t\t};\n\n\t\t\tconst resetAutoSlide = () => {\n\t\t\t\tclearInterval(slideInterval);\n\t\t\t\tslideInterval = setInterval(autoSlide, slideDuration);\n\t\t\t};\n\n\t\t\t// Function to handle automatic sliding\n\t\t\tconst autoSlide = () => {\n\t\t\t\tconst nextSlideIndex = (currentSlideIndex + 1) % slides.length;\n\t\t\t\tmoveToSlide(nextSlideIndex);\n\t\t\t};\n\n\t\t\t// Event listener for dot navigation\n\t\t\tdotsNav.addEventListener(\"click\", (e) => {\n\t\t\t\tconst targetDot = e.target.closest(\"span\");\n\t\t\t\tif (!targetDot) return;\n\n\t\t\t\tconst targetIndex = dots.findIndex((dot) => dot === targetDot);\n\t\t\t\tmoveToSlide(targetIndex);\n\n\t\t\t\t// Reset and restart auto-slide\n\t\t\t\tresetAutoSlide();\n\t\t\t});\n\n\t\t\t// Sync dots based on scroll position\n\t\t\ttrack.addEventListener(\"scroll\", () => {\n\t\t\t\tif (isScrolling) return; // Prevents handling the event during slide transition\n\n\t\t\t\tconst slideWidth = slides[0].offsetWidth;\n\t\t\t\tconst scrolledIndex = Math.round(track.scrollLeft / slideWidth);\n\t\t\t\tif (\n\t\t\t\t\tscrolledIndex !== currentSlideIndex &&\n\t\t\t\t\tscrolledIndex < dots.length\n\t\t\t\t) {\n\t\t\t\t\tupdateDots(currentSlideIndex, scrolledIndex);\n\t\t\t\t\tcurrentSlideIndex = scrolledIndex;\n\t\t\t\t\t// Reset and restart auto-slide on manual scroll\n\t\t\t\t\tresetAutoSlide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Set the initial active dot\n\t\t\tupdateDots(-1, 0);\n\n\t\t\t// Start auto-slide\n\t\t\tslideInterval = setInterval(autoSlide, slideDuration);\n\n\t\t\t// Set up slide positions on load and resize\n\t\t\tsetSlidePositions();\n\t\t\twindow.addEventListener(\"resize\", setSlidePositions);\n\t\t}\n\t};\n\n\t// Initialize the carousel logic on page load\n\tinitializeCarousel();\n\n\t// Re-check and reinitialize the carousel logic on window resize\n\twindow.addEventListener(\"resize\", () => {\n\t\t// Remove any previously added event listeners to avoid duplication\n\t\tconst track = document.querySelector(\".carousel-track\");\n\t\ttrack.removeAttribute(\"style\"); // Reset inline styles added previously\n\n\t\t// Reinitialize if the condition is met\n\t\tinitializeCarousel();\n\t});\n}\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\tloadScript([\n\t\t'https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js',\n\t\t'https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js'\n\t], loadCallback)\n});\n"],"names":["loadCallback","gsap","registerPlugin","ScrollToPlugin","initializeCarousel","window","innerWidth","track","document","querySelector","slides","Array","from","children","dotsNav","dots","currentSlideIndex","slideInterval","isScrolling","slideGap","slideDuration","setSlidePositions","slideWidth","getBoundingClientRect","width","containerWidth","parentElement","initialOffset","style","paddingLeft","forEach","slide","index","left","updateDots","currentIndex","targetIndex","classList","remove","add","moveToSlide","targetSlide","targetPosition","offsetLeft","to","scrollTo","x","duration","ease","onComplete","resetAutoSlide","clearInterval","setInterval","autoSlide","nextSlideIndex","length","addEventListener","e","targetDot","target","closest","findIndex","dot","offsetWidth","scrolledIndex","Math","round","scrollLeft","removeAttribute","loadScript"],"sourceRoot":""}